import{d as w,E as D,r as n,p as T,c as U,w as t,u as l,I as A,a,b as B,e as N,f as d,g as _,q as R,s as S,i as c,j,k as V,l as q,m as I,G,n as H,A as M,o as O}from"./index-Cpn_Ur6X.js";import{g as P,e as x,u as $,f as z,d as b,s as F,_ as J}from"./_plugin-vue_export-helper-DJKIt83I.js";const K=w({__name:"EditExpense",setup(L){const y=D(),g=M(),m=y.params.id,s=n(""),u=n(null),r=n("expense"),i=n(""),p=n(""),f=n(!1);T(async()=>{const v=await P(x(b,"expenses",m));if(v.exists()){const e=v.data();s.value=e.title,u.value=e.amount,r.value=e.type,i.value=e.category,p.value=e.note}});const C=async()=>{if(!s.value||u.value===null){alert("กรุณากรอกข้อมูลให้ครบ");return}await $(x(b,"expenses",m),{title:s.value,amount:Number(u.value),type:r.value,category:i.value,note:p.value,updatedAt:F()}),alert("แก้ไขข้อมูลเรียบร้อยแล้ว"),g.replace("/tabs/list")},E=()=>{f.value=!0},k=[{text:"ยกเลิก",role:"cancel"},{text:"ลบ",role:"destructive",handler:async()=>{await z(x(b,"expenses",m)),alert("ลบข้อมูลเรียบร้อยแล้ว"),g.replace("/tabs/list")}}];return(v,e)=>(O(),U(l(A),null,{default:t(()=>[a(l(_),null,{default:t(()=>[a(l(B),{color:"primary"},{default:t(()=>[a(l(N),null,{default:t(()=>[...e[6]||(e[6]=[d("แก้ไขรายรับ–รายจ่าย",-1)])]),_:1})]),_:1})]),_:1}),a(l(H),{class:"ion-padding"},{default:t(()=>[a(l(R),null,{default:t(()=>[a(l(S),null,{default:t(()=>[a(l(c),{label:"ชื่อรายการ","label-placement":"floating",fill:"outline",modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value=o)},null,8,["modelValue"]),a(l(c),{label:"จำนวนเงิน",type:"number","label-placement":"floating",fill:"outline",class:"mt",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o)},null,8,["modelValue"]),a(l(j),{label:"ประเภท","label-placement":"floating",fill:"outline",class:"mt",modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=o=>r.value=o)},{default:t(()=>[a(l(V),{value:"income"},{default:t(()=>[...e[7]||(e[7]=[d("รายรับ",-1)])]),_:1}),a(l(V),{value:"expense"},{default:t(()=>[...e[8]||(e[8]=[d("รายจ่าย",-1)])]),_:1})]),_:1},8,["modelValue"]),a(l(c),{label:"หมวดหมู่","label-placement":"floating",fill:"outline",class:"mt",modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=o=>i.value=o)},null,8,["modelValue"]),a(l(q),{label:"หมายเหตุ","label-placement":"floating",fill:"outline",class:"mt","auto-grow":"",modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=o=>p.value=o)},null,8,["modelValue"]),a(l(I),{expand:"block",color:"success",class:"mt-lg",onClick:C},{default:t(()=>[...e[9]||(e[9]=[d(" บันทึกการแก้ไข ",-1)])]),_:1}),a(l(I),{expand:"block",color:"danger",fill:"outline",class:"mt",onClick:E},{default:t(()=>[...e[10]||(e[10]=[d(" ลบรายการนี้ ",-1)])]),_:1})]),_:1})]),_:1}),a(l(G),{"is-open":f.value,header:"ยืนยันการลบ",message:"คุณต้องการลบรายการนี้ใช่หรือไม่?",buttons:k,onDidDismiss:e[5]||(e[5]=o=>f.value=!1)},null,8,["is-open"])]),_:1})]),_:1}))}}),Y=J(K,[["__scopeId","data-v-6eea71e1"]]);export{Y as default};
